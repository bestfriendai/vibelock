{
  "passed": [
    {
      "test": "Environment file exists",
      "file": ".env"
    },
    {
      "test": "Required environment variables",
      "file": ".env"
    },
    {
      "test": "Check npm dependencies",
      "command": "npm list --depth=0"
    },
    {
      "test": "AuthScreen exists",
      "file": "src/screens/AuthScreen.tsx"
    },
    {
      "test": "Auth service exists",
      "file": "src/services/auth.ts"
    },
    {
      "test": "Auth store exists",
      "file": "src/state/authStore.ts"
    },
    {
      "test": "Auth service methods",
      "file": "src/services/auth.ts"
    },
    {
      "test": "ChatroomsScreen exists",
      "file": "src/screens/ChatroomsScreen.tsx"
    },
    {
      "test": "WebSocket service exists",
      "file": "src/services/websocketService.ts"
    },
    {
      "test": "Chat store exists",
      "file": "src/state/chatStore.ts"
    },
    {
      "test": "Storage service exists",
      "file": "src/services/storage.ts"
    },
    {
      "test": "ProfileScreen exists",
      "file": "src/screens/ProfileScreen.tsx"
    },
    {
      "test": "SearchScreen exists",
      "file": "src/screens/SearchScreen.tsx"
    },
    {
      "test": "Search service exists",
      "file": "src/services/search.ts"
    },
    {
      "test": "Notification service exists",
      "file": "src/services/notificationService.ts"
    },
    {
      "test": "Notification service methods",
      "file": "src/services/notificationService.ts"
    },
    {
      "test": "Subscription service exists",
      "file": "src/services/subscriptionService.ts"
    },
    {
      "test": "AdMob configuration exists",
      "file": "src/config/admobConfig.ts"
    },
    {
      "test": "AdMob service exists",
      "file": "src/services/adMobService.ts"
    },
    {
      "test": "App navigator exists",
      "file": "src/navigation/AppNavigator.tsx"
    },
    {
      "test": "App entry point exists",
      "file": "App.tsx"
    },
    {
      "test": "ChatroomsScreen exists",
      "file": "src/screens/ChatroomsScreen.tsx"
    },
    {
      "test": "ProfileScreen exists",
      "file": "src/screens/ProfileScreen.tsx"
    },
    {
      "test": "SearchScreen exists",
      "file": "src/screens/SearchScreen.tsx"
    },
    {
      "test": "AuthScreen exists",
      "file": "src/screens/AuthScreen.tsx"
    },
    {
      "test": "Supabase configuration exists",
      "file": "src/config/supabase.ts"
    },
    {
      "test": "authStore exists",
      "file": "src/state/authStore.ts"
    },
    {
      "test": "chatStore exists",
      "file": "src/state/chatStore.ts"
    },
    {
      "test": "notificationStore exists",
      "file": "src/state/notificationStore.ts"
    },
    {
      "test": "subscriptionStore exists",
      "file": "src/state/subscriptionStore.ts"
    },
    {
      "test": "Error handling utilities exist",
      "file": "src/utils/errorHandling.ts"
    },
    {
      "test": "LoadingSpinner component exists",
      "file": "src/components/LoadingSpinner.tsx"
    },
    {
      "test": "ErrorBoundary component exists",
      "file": "src/components/ErrorBoundary.tsx"
    },
    {
      "test": "Network utilities exist",
      "file": "src/utils/networkUtils.ts"
    },
    {
      "test": "Database types exist",
      "file": "src/types/database.types.ts"
    },
    {
      "test": "Database schema file exists",
      "file": "schema.sql"
    }
  ],
  "failed": [
    {
      "test": "Expo configuration health check",
      "command": "npx expo doctor",
      "error": "Command failed: npx expo doctor"
    },
    {
      "test": "TypeScript type checking",
      "command": "npm run typecheck",
      "error": "Command failed: npm run typecheck"
    },
    {
      "test": "ESLint checking",
      "command": "npm run lint",
      "error": "Command failed: npm run lint"
    },
    {
      "test": "Prettier formatting check",
      "command": "npm run format:check",
      "error": "Command failed: npm run format:check\n[warn] coverage/api/anthropic.ts.html\n[warn] coverage/api/chat-service.ts.html\n[warn] coverage/api/chatApi.ts.html\n[warn] coverage/api/grok.ts.html\n[warn] coverage/api/image-generation.ts.html\n[warn] coverage/api/index.html\n[warn] coverage/api/openai.ts.html\n[warn] coverage/api/secure-ai-service.ts.html\n[warn] coverage/api/transcribe-audio.ts.html\n[warn] coverage/api/webhooks/index.html\n[warn] coverage/api/webhooks/revenuecat.ts.html\n[warn] coverage/base.css\n[warn] coverage/block-navigation.js\n[warn] coverage/components/AccessibilityTestScreen.tsx.html\n[warn] coverage/components/AdBanner.tsx.html\n[warn] coverage/components/ads/AdBanner.tsx.html\n[warn] coverage/components/ads/index.html\n[warn] coverage/components/AnimatedButton.tsx.html\n[warn] coverage/components/AnimatedInput.tsx.html\n[warn] coverage/components/AppOpenAdHandler.tsx.html\n[warn] coverage/components/AsyncErrorBoundary.tsx.html\n[warn] coverage/components/AudioControls.tsx.html\n[warn] coverage/components/AuthErrorTestScreen.tsx.html\n[warn] coverage/components/AuthRequiredScreen.tsx.html\n[warn] coverage/components/BottomSheet.tsx.html\n[warn] coverage/components/ChatInput.tsx.html\n[warn] coverage/components/ChatRoomCard.tsx.html\n[warn] coverage/components/ChatroomFixTestButton.tsx.html\n[warn] coverage/components/ChatroomTestButton.tsx.html\n[warn] coverage/components/CommentInput.tsx.html\n[warn] coverage/components/CommentSection.tsx.html\n[warn] coverage/components/ComponentErrorBoundary.tsx.html\n[warn] coverage/components/ConfirmationModal.tsx.html\n[warn] coverage/components/CreateTabButton.tsx.html\n[warn] coverage/components/CustomTabBar.tsx.html\n[warn] coverage/components/DistanceFilter.tsx.html\n[warn] coverage/components/EmojiPicker.tsx.html\n[warn] coverage/components/EmptyState.tsx.html\n[warn] coverage/components/EnhancedChatRoomCard.tsx.html\n[warn] coverage/components/EnhancedMessageBubble.tsx.html\n[warn] coverage/components/EnhancedMessageInput.tsx.html\n[warn] coverage/components/EnhancedReviewCard.tsx.html\n[warn] coverage/components/ErrorBoundary.tsx.html\n[warn] coverage/components/ErrorBoundaryTestScreen.tsx.html\n[warn] coverage/components/ExpandableText.tsx.html\n[warn] coverage/components/FeatureGate.tsx.html\n[warn] coverage/components/FormSection.tsx.html\n[warn] coverage/components/ForwardMessageModal.tsx.html\n[warn] coverage/components/ImageCarousel.tsx.html\n[warn] coverage/components/iMessageBubble.tsx.html\n[warn] coverage/components/iMessageInput.tsx.html\n[warn] coverage/components/index.html\n[warn] coverage/components/LazyImage.tsx.html\n[warn] coverage/components/legal/index.html\n[warn] coverage/components/legal/index.ts.html\n[warn] coverage/components/legal/LegalAcceptance.tsx.html\n[warn] coverage/components/legal/LegalModal.tsx.html\n[warn] coverage/components/legal/LegalTestScreen.tsx.html\n[warn] coverage/components/legal/PrivacyPolicy.tsx.html\n[warn] coverage/components/legal/TermsOfService.tsx.html\n[warn] coverage/components/LikeDislikeButtons.tsx.html\n[warn] coverage/components/LoadingSpinner.tsx.html\n[warn] coverage/components/LocationSelector.tsx.html\n[warn] coverage/components/MediaCommentModal.tsx.html\n[warn] coverage/components/MediaGallery.tsx.html\n[warn] coverage/components/MediaPicker.tsx.html\n[warn] coverage/components/MediaThumbnail.tsx.html\n[warn] coverage/components/MediaUploadGrid.tsx.html\n[warn] coverage/components/MediaUploadProgress.tsx.html\n[warn] coverage/components/MediaViewer.tsx.html\n[warn] coverage/components/MessageActionsModal.tsx.html\n[warn] coverage/components/MessageBubble.tsx.html\n[warn] coverage/components/MessageEditModal.tsx.html\n[warn] coverage/components/MessageReactions.tsx.html\n[warn] coverage/components/MessageSearchModal.tsx.html\n[warn] coverage/components/NetworkDebugOverlay.tsx.html\n[warn] coverage/components/OfflineBanner.tsx.html\n[warn] coverage/components/PerformanceDashboard.tsx.html\n[warn] coverage/components/PremiumBadge.tsx.html\n[warn] coverage/components/PremiumFeatures.tsx.html\n[warn] coverage/components/PremiumThemeToggle.tsx.html\n[warn] coverage/components/ProfileCard.tsx.html\n[warn] coverage/components/ProfileCardSkeleton.tsx.html\n[warn] coverage/components/ProgressIndicator.tsx.html\n[warn] coverage/components/ReliableOfflineBanner.tsx.html\n[warn] coverage/components/ReportModal.tsx.html\n[warn] coverage/components/ReviewCard.tsx.html\n[warn] coverage/components/ReviewGridCard.tsx.html\n[warn] coverage/components/ReviewSkeleton.tsx.html\n[warn] coverage/components/ScreenErrorBoundary.tsx.html\n[warn] coverage/components/SegmentedTabs.tsx.html\n[warn] coverage/components/SmartChatFeatures.tsx.html\n[warn] coverage/components/SocialMediaInput.tsx.html\n[warn] coverage/components/StaggeredGrid.tsx.html\n[warn] coverage/components/subscription/index.html\n[warn] coverage/components/subscription/PaywallAdaptive.tsx.html\n[warn] coverage/components/SwipeToReply.tsx.html\n[warn] coverage/components/TestMonetization.tsx.html\n[warn] coverage/components/ThemeAwareLogo.tsx.html\n[warn] coverage/components/ThemedComponents.tsx.html\n[warn] coverage/components/UserFeedbackSystem.tsx.html\n[warn] coverage/components/VideoTestComponent.tsx.html\n[warn] coverage/components/VoiceMessage.tsx.html\n[warn] coverage/components/VoiceMessageTranscription.tsx.html\n[warn] coverage/components/WaveformVisualizer.tsx.html\n[warn] coverage/components/ZoomableImage.tsx.html\n[warn] coverage/config/admobConfig.ts.html\n[warn] coverage/config/index.html\n[warn] coverage/config/polyfillConfig.ts.html\n[warn] coverage/config/supabase.ts.html\n[warn] coverage/constants/index.html\n[warn] coverage/constants/strings.ts.html\n[warn] coverage/contexts/AdContext.tsx.html\n[warn] coverage/contexts/index.html\n[warn] coverage/examples/index.html\n[warn] coverage/examples/MonetizationExample.tsx.html\n[warn] coverage/hooks/index.html\n[warn] coverage/hooks/useAppInitialization.ts.html\n[warn] coverage/hooks/useAudioPlayer.ts.html\n[warn] coverage/hooks/useChatJoin.ts.html\n[warn] coverage/hooks/useInterstitialAd.ts.html\n[warn] coverage/hooks/useInterstitialAds.ts.html\n[warn] coverage/hooks/useMemoryMonitoring.ts.html\n[warn] coverage/hooks/useOffline.ts.html\n[warn] coverage/hooks/usePerformanceOptimization.ts.html\n[warn] coverage/hooks/useProductionQuality.ts.html\n[warn] coverage/hooks/useSubscription.ts.html\n[warn] coverage/i18n/i18n.ts.html\n[warn] coverage/i18n/index.html\n[warn] coverage/index.html\n[warn] coverage/lcov-report/api/anthropic.ts.html\n[warn] coverage/lcov-report/api/chat-service.ts.html\n[warn] coverage/lcov-report/api/chatApi.ts.html\n[warn] coverage/lcov-report/api/grok.ts.html\n[warn] coverage/lcov-report/api/image-generation.ts.html\n[warn] coverage/lcov-report/api/index.html\n[warn] coverage/lcov-report/api/openai.ts.html\n[warn] coverage/lcov-report/api/secure-ai-service.ts.html\n[warn] coverage/lcov-report/api/transcribe-audio.ts.html\n[warn] coverage/lcov-report/api/webhooks/index.html\n[warn] coverage/lcov-report/api/webhooks/revenuecat.ts.html\n[warn] coverage/lcov-report/base.css\n[warn] coverage/lcov-report/block-navigation.js\n[warn] coverage/lcov-report/components/AccessibilityTestScreen.tsx.html\n[warn] coverage/lcov-report/components/AdBanner.tsx.html\n[warn] coverage/lcov-report/components/ads/AdBanner.tsx.html\n[warn] coverage/lcov-report/components/ads/index.html\n[warn] coverage/lcov-report/components/AnimatedButton.tsx.html\n[warn] coverage/lcov-report/components/AnimatedInput.tsx.html\n[warn] coverage/lcov-report/components/AppOpenAdHandler.tsx.html\n[warn] coverage/lcov-report/components/AsyncErrorBoundary.tsx.html\n[warn] coverage/lcov-report/components/AudioControls.tsx.html\n[warn] coverage/lcov-report/components/AuthErrorTestScreen.tsx.html\n[warn] coverage/lcov-report/components/AuthRequiredScreen.tsx.html\n[warn] coverage/lcov-report/components/BottomSheet.tsx.html\n[warn] coverage/lcov-report/components/ChatInput.tsx.html\n[warn] coverage/lcov-report/components/ChatRoomCard.tsx.html\n[warn] coverage/lcov-report/components/ChatroomFixTestButton.tsx.html\n[warn] coverage/lcov-report/components/ChatroomTestButton.tsx.html\n[warn] coverage/lcov-report/components/CommentInput.tsx.html\n[warn] coverage/lcov-report/components/CommentSection.tsx.html\n[warn] coverage/lcov-report/components/ComponentErrorBoundary.tsx.html\n[warn] coverage/lcov-report/components/ConfirmationModal.tsx.html\n[warn] coverage/lcov-report/components/CreateTabButton.tsx.html\n[warn] coverage/lcov-report/components/CustomTabBar.tsx.html\n[warn] coverage/lcov-report/components/DistanceFilter.tsx.html\n[warn] coverage/lcov-report/components/EmojiPicker.tsx.html\n[warn] coverage/lcov-report/components/EmptyState.tsx.html\n[warn] coverage/lcov-report/components/EnhancedChatRoomCard.tsx.html\n[warn] coverage/lcov-report/components/EnhancedMessageBubble.tsx.html\n[warn] coverage/lcov-report/components/EnhancedMessageInput.tsx.html\n[warn] coverage/lcov-report/components/EnhancedReviewCard.tsx.html\n[warn] coverage/lcov-report/components/ErrorBoundary.tsx.html\n[warn] coverage/lcov-report/components/ErrorBoundaryTestScreen.tsx.html\n[warn] coverage/lcov-report/components/ExpandableText.tsx.html\n[warn] coverage/lcov-report/components/FeatureGate.tsx.html\n[warn] coverage/lcov-report/components/FormSection.tsx.html\n[warn] coverage/lcov-report/components/ForwardMessageModal.tsx.html\n[warn] coverage/lcov-report/components/ImageCarousel.tsx.html\n[warn] coverage/lcov-report/components/iMessageBubble.tsx.html\n[warn] coverage/lcov-report/components/iMessageInput.tsx.html\n[warn] coverage/lcov-report/components/index.html\n[warn] coverage/lcov-report/components/LazyImage.tsx.html\n[warn] coverage/lcov-report/components/legal/index.html\n[warn] coverage/lcov-report/components/legal/index.ts.html\n[warn] coverage/lcov-report/components/legal/LegalAcceptance.tsx.html\n[warn] coverage/lcov-report/components/legal/LegalModal.tsx.html\n[warn] coverage/lcov-report/components/legal/LegalTestScreen.tsx.html\n[warn] coverage/lcov-report/components/legal/PrivacyPolicy.tsx.html\n[warn] coverage/lcov-report/components/legal/TermsOfService.tsx.html\n[warn] coverage/lcov-report/components/LikeDislikeButtons.tsx.html\n[warn] coverage/lcov-report/components/LoadingSpinner.tsx.html\n[warn] coverage/lcov-report/components/LocationSelector.tsx.html\n[warn] coverage/lcov-report/components/MediaCommentModal.tsx.html\n[warn] coverage/lcov-report/components/MediaGallery.tsx.html\n[warn] coverage/lcov-report/components/MediaPicker.tsx.html\n[warn] coverage/lcov-report/components/MediaThumbnail.tsx.html\n[warn] coverage/lcov-report/components/MediaUploadGrid.tsx.html\n[warn] coverage/lcov-report/components/MediaUploadProgress.tsx.html\n[warn] coverage/lcov-report/components/MediaViewer.tsx.html\n[warn] coverage/lcov-report/components/MessageActionsModal.tsx.html\n[warn] coverage/lcov-report/components/MessageBubble.tsx.html\n[warn] coverage/lcov-report/components/MessageEditModal.tsx.html\n[warn] coverage/lcov-report/components/MessageReactions.tsx.html\n[warn] coverage/lcov-report/components/MessageSearchModal.tsx.html\n[warn] coverage/lcov-report/components/NetworkDebugOverlay.tsx.html\n[warn] coverage/lcov-report/components/OfflineBanner.tsx.html\n[warn] coverage/lcov-report/components/PerformanceDashboard.tsx.html\n[warn] coverage/lcov-report/components/PremiumBadge.tsx.html\n[warn] coverage/lcov-report/components/PremiumFeatures.tsx.html\n[warn] coverage/lcov-report/components/PremiumThemeToggle.tsx.html\n[warn] coverage/lcov-report/components/ProfileCard.tsx.html\n[warn] coverage/lcov-report/components/ProfileCardSkeleton.tsx.html\n[warn] coverage/lcov-report/components/ProgressIndicator.tsx.html\n[warn] coverage/lcov-report/components/ReliableOfflineBanner.tsx.html\n[warn] coverage/lcov-report/components/ReportModal.tsx.html\n[warn] coverage/lcov-report/components/ReviewCard.tsx.html\n[warn] coverage/lcov-report/components/ReviewGridCard.tsx.html\n[warn] coverage/lcov-report/components/ReviewSkeleton.tsx.html\n[warn] coverage/lcov-report/components/ScreenErrorBoundary.tsx.html\n[warn] coverage/lcov-report/components/SegmentedTabs.tsx.html\n[warn] coverage/lcov-report/components/SmartChatFeatures.tsx.html\n[warn] coverage/lcov-report/components/SocialMediaInput.tsx.html\n[warn] coverage/lcov-report/components/StaggeredGrid.tsx.html\n[warn] coverage/lcov-report/components/subscription/index.html\n[warn] coverage/lcov-report/components/subscription/PaywallAdaptive.tsx.html\n[warn] coverage/lcov-report/components/SwipeToReply.tsx.html\n[warn] coverage/lcov-report/components/TestMonetization.tsx.html\n[warn] coverage/lcov-report/components/ThemeAwareLogo.tsx.html\n[warn] coverage/lcov-report/components/ThemedComponents.tsx.html\n[warn] coverage/lcov-report/components/UserFeedbackSystem.tsx.html\n[warn] coverage/lcov-report/components/VideoTestComponent.tsx.html\n[warn] coverage/lcov-report/components/VoiceMessage.tsx.html\n[warn] coverage/lcov-report/components/VoiceMessageTranscription.tsx.html\n[warn] coverage/lcov-report/components/WaveformVisualizer.tsx.html\n[warn] coverage/lcov-report/components/ZoomableImage.tsx.html\n[warn] coverage/lcov-report/config/admobConfig.ts.html\n[warn] coverage/lcov-report/config/index.html\n[warn] coverage/lcov-report/config/polyfillConfig.ts.html\n[warn] coverage/lcov-report/config/supabase.ts.html\n[warn] coverage/lcov-report/constants/index.html\n[warn] coverage/lcov-report/constants/strings.ts.html\n[warn] coverage/lcov-report/contexts/AdContext.tsx.html\n[warn] coverage/lcov-report/contexts/index.html\n[warn] coverage/lcov-report/examples/index.html\n[warn] coverage/lcov-report/examples/MonetizationExample.tsx.html\n[warn] coverage/lcov-report/hooks/index.html\n[warn] coverage/lcov-report/hooks/useAppInitialization.ts.html\n[warn] coverage/lcov-report/hooks/useAudioPlayer.ts.html\n[warn] coverage/lcov-report/hooks/useChatJoin.ts.html\n[warn] coverage/lcov-report/hooks/useInterstitialAd.ts.html\n[warn] coverage/lcov-report/hooks/useInterstitialAds.ts.html\n[warn] coverage/lcov-report/hooks/useMemoryMonitoring.ts.html\n[warn] coverage/lcov-report/hooks/useOffline.ts.html\n[warn] coverage/lcov-report/hooks/usePerformanceOptimization.ts.html\n[warn] coverage/lcov-report/hooks/useProductionQuality.ts.html\n[warn] coverage/lcov-report/hooks/useSubscription.ts.html\n[warn] coverage/lcov-report/i18n/i18n.ts.html\n[warn] coverage/lcov-report/i18n/index.html\n[warn] coverage/lcov-report/index.html\n[warn] coverage/lcov-report/prettify.css\n[warn] coverage/lcov-report/prettify.js\n[warn] coverage/lcov-report/providers/index.html\n[warn] coverage/lcov-report/providers/ThemeProvider.tsx.html\n[warn] coverage/lcov-report/screens/AuthScreen.tsx.html\n[warn] coverage/lcov-report/screens/AuthTestScreen.tsx.html\n[warn] coverage/lcov-report/screens/BrowseScreen.tsx.html\n[warn] coverage/lcov-report/screens/ChatRoomListScreen.tsx.html\n[warn] coverage/lcov-report/screens/ChatRoomScreen.tsx.html\n[warn] coverage/lcov-report/screens/ChatroomsScreen.tsx.html\n[warn] coverage/lcov-report/screens/CreateReviewScreen.tsx.html\n[warn] coverage/lcov-report/screens/DeleteAccountScreen.tsx.html\n[warn] coverage/lcov-report/screens/ForgotPasswordScreen.tsx.html\n[warn] coverage/lcov-report/screens/index.html\n[warn] coverage/lcov-report/screens/LocationSettingsScreen.tsx.html\n[warn] coverage/lcov-report/screens/NotificationsScreen.tsx.html\n[warn] coverage/lcov-report/screens/OnboardingScreen.tsx.html\n[warn] coverage/lcov-report/screens/PersonProfileScreen.tsx.html\n[warn] coverage/lcov-report/screens/ProfileScreen.tsx.html\n[warn] coverage/lcov-report/screens/ResetPasswordScreen.tsx.html\n[warn] coverage/lcov-report/screens/ReviewDetailScreen.backup.tsx.html\n[warn] coverage/lcov-report/screens/ReviewDetailScreen.tsx.html\n[warn] coverage/lcov-report/screens/SearchScreen.tsx.html\n[warn] coverage/lcov-report/screens/SignInScreen.tsx.html\n[warn] coverage/lcov-report/screens/SignUpScreen.tsx.html\n[warn] coverage/lcov-report/services/adMobService.ts.html\n[warn] coverage/lcov-report/services/appStateManager.ts.html\n[warn] coverage/lcov-report/services/audioAnalysisService.ts.html\n[warn] coverage/lcov-report/services/audioModeService.ts.html\n[warn] coverage/lcov-report/services/auth.ts.html\n[warn] coverage/lcov-report/services/biometricService.ts.html\n[warn] coverage/lcov-report/services/cacheService.ts.html\n[warn] coverage/lcov-report/services/chat.ts.html\n[warn] coverage/lcov-report/services/collegeService.ts.html\n[warn] coverage/lcov-report/services/consolidatedRealtimeService.ts.html\n[warn] coverage/lcov-report/services/errorReporting.ts.html\n[warn] coverage/lcov-report/services/gdprConsentService.ts.html\n[warn] coverage/lcov-report/services/imageCompressionService.ts.html\n[warn] coverage/lcov-report/services/index.html\n[warn] coverage/lcov-report/services/initializationService.ts.html\n[warn] coverage/lcov-report/services/locationService.ts.html\n[warn] coverage/lcov-report/services/mediaProcessingService.ts.html\n[warn] coverage/lcov-report/services/memoryManager.ts.html\n[warn] coverage/lcov-report/services/messageEditService.ts.html\n[warn] coverage/lcov-report/services/messageForwardService.ts.html\n[warn] coverage/lcov-report/services/messagePaginationService.ts.html\n[warn] coverage/lcov-report/services/messageStatusService.ts.html\n[warn] coverage/lcov-report/services/messageVirtualizer.ts.html\n[warn] coverage/lcov-report/services/moderation.ts.html\n[warn] coverage/lcov-report/services/notificationHelpers.ts.html\n[warn] coverage/lcov-report/services/notificationService.ts.html\n[warn] coverage/lcov-report/services/performanceMonitoring.ts.html\n[warn] coverage/lcov-report/services/permissionValidationService.ts.html\n[warn] coverage/lcov-report/services/productionMonitoring.ts.html\n[warn] coverage/lcov-report/services/realtimeChat.ts.html\n[warn] coverage/lcov-report/services/realtimeSubscriptionManager.ts.html\n[warn] coverage/lcov-report/services/reports.ts.html\n[warn] coverage/lcov-report/services/reviews.ts.html\n[warn] coverage/lcov-report/services/search.ts.html\n[warn] coverage/lcov-report/services/shareService.ts.html\n[warn] coverage/lcov-report/services/socialSharingService.ts.html\n[warn] coverage/lcov-report/services/storage.ts.html\n[warn] coverage/lcov-report/services/storageService.ts.html\n[warn] coverage/lcov-report/services/subscriptionService.ts.html\n[warn] coverage/lcov-report/services/supabase.ts.html\n[warn] coverage/lcov-report/services/users.ts.html\n[warn] coverage/lcov-report/services/usersService.ts.html\n[warn] coverage/lcov-report/services/utils/FileCompressor.ts.html\n[warn] coverage/lcov-report/services/utils/FileDownloader.ts.html\n[warn] coverage/lcov-report/services/utils/FilePreviewer.ts.html\n[warn] coverage/lcov-report/services/utils/FilePreviewGenerator.ts.html\n[warn] coverage/lcov-report/services/utils/FileUploader.ts.html\n[warn] coverage/lcov-report/services/utils/FileValidator.ts.html\n[warn] coverage/lcov-report/services/utils/ImageProcessor.ts.html\n[warn] coverage/lcov-report/services/utils/index.html\n[warn] coverage/lcov-report/services/utils/PathSanitizer.ts.html\n[warn] coverage/lcov-report/services/videoThumbnailService.ts.html\n[warn] coverage/lcov-report/services/websocketService.ts.html\n[warn] coverage/lcov-report/sorter.js\n[warn] coverage/lcov-report/state/audioPlayerStore.ts.html\n[warn] coverage/lcov-report/state/authStore.ts.html\n[warn] coverage/lcov-report/state/chatRoomsStore.ts.html\n[warn] coverage/lcov-report/state/chatStore.ts.html\n[warn] coverage/lcov-report/state/commentsStore.ts.html\n[warn] coverage/lcov-report/state/index.html\n[warn] coverage/lcov-report/state/messagesStore.ts.html\n[warn] coverage/lcov-report/state/notificationStore.ts.html\n[warn] coverage/lcov-report/state/reviewsStore.ts.html\n[warn] coverage/lcov-report/state/safetyStore.ts.html\n[warn] coverage/lcov-report/state/subscriptionStore.ts.html\n[warn] coverage/lcov-report/state/themeStore.ts.html\n[warn] coverage/lcov-report/types/ai.ts.html\n[warn] coverage/lcov-report/types/database.types.ts.html\n[warn] coverage/lcov-report/types/error.ts.html\n[warn] coverage/lcov-report/types/index.html\n[warn] coverage/lcov-report/types/index.ts.html\n[warn] coverage/lcov-report/types/storage.ts.html\n[warn] coverage/lcov-report/utils/adMobTestingUtils.ts.html\n[warn] coverage/lcov-report/utils/analytics.ts.html\n[warn] coverage/lcov-report/utils/audioUtils.ts.html\n[warn] coverage/lcov-report/utils/authUtils.ts.html\n[warn] coverage/lcov-report/utils/batchingUtils.ts.html\n[warn] coverage/lcov-report/utils/buildEnvironment.ts.html\n[warn] coverage/lcov-report/utils/chatroomScrollTest.ts.html\n[warn] coverage/lcov-report/utils/chatroomTest.ts.html\n[warn] coverage/lcov-report/utils/chatUtils.ts.html\n[warn] coverage/lcov-report/utils/cn.ts.html\n[warn] coverage/lcov-report/utils/compatibilityUtils.ts.html\n[warn] coverage/lcov-report/utils/dateUtils.ts.html\n[warn] coverage/lcov-report/utils/debugUtils.ts.html\n[warn] coverage/lcov-report/utils/e2eTestRunner.ts.html\n[warn] coverage/lcov-report/utils/environmentValidation.ts.html\n[warn] coverage/lcov-report/utils/errorHandling.ts.html\n[warn] coverage/lcov-report/utils/fieldMapping.ts.html\n[warn] coverage/lcov-report/utils/hermesCompatibility.ts.html\n[warn] coverage/lcov-report/utils/imagePickerWorkaround.ts.html\n[warn] coverage/lcov-report/utils/index.html\n[warn] coverage/lcov-report/utils/inputValidation.ts.html\n[warn] coverage/lcov-report/utils/location.ts.html\n[warn] coverage/lcov-report/utils/mediaErrorHandling.ts.html\n[warn] coverage/lcov-report/utils/mediaUtils.ts.html\n[warn] coverage/lcov-report/utils/messageDeduplication.ts.html\n[warn] coverage/lcov-report/utils/messageUtils.ts.html\n[warn] coverage/lcov-report/utils/mmkvStorage.ts.html\n[warn] coverage/lcov-report/utils/monetizationIntegrationTest.ts.html\n[warn] coverage/lcov-report/utils/networkUtils.ts.html\n[warn] coverage/lcov-report/utils/performance.ts.html\n[warn] coverage/lcov-report/utils/performanceUtils.ts.html\n[warn] coverage/lcov-report/utils/platform.ts.html\n[warn] coverage/lcov-report/utils/propertyGuards.ts.html\n[warn] coverage/lcov-report/utils/realtimeUtils.ts.html\n[warn] coverage/lcov-report/utils/reliableNetworkCheck.ts.html\n[warn] coverage/lcov-report/utils/responsive.ts.html\n[warn] coverage/lcov-report/utils/responsiveStyles.ts.html\n[warn] coverage/lcov-report/utils/retryLogic.ts.html\n[warn] coverage/lcov-report/utils/scrollUtils.ts.html\n[warn] coverage/lcov-report/utils/storageDebug.ts.html\n[warn] coverage/lcov-report/utils/subscriptionUtils.ts.html\n[warn] coverage/lcov-report/utils/supabaseAuthTests.ts.html\n[warn] coverage/lcov-report/utils/supabaseTestSuite.ts.html\n[warn] coverage/lcov-report/utils/uiValidation.ts.html\n[warn] coverage/lcov-report/utils/uploadTest.ts.html\n[warn] coverage/lcov-report/utils/videoUtils.ts.html\n[warn] coverage/prettify.css\n[warn] coverage/prettify.js\n[warn] coverage/providers/index.html\n[warn] coverage/providers/ThemeProvider.tsx.html\n[warn] coverage/screens/AuthScreen.tsx.html\n[warn] coverage/screens/AuthTestScreen.tsx.html\n[warn] coverage/screens/BrowseScreen.tsx.html\n[warn] coverage/screens/ChatRoomListScreen.tsx.html\n[warn] coverage/screens/ChatRoomScreen.tsx.html\n[warn] coverage/screens/ChatroomsScreen.tsx.html\n[warn] coverage/screens/CreateReviewScreen.tsx.html\n[warn] coverage/screens/DeleteAccountScreen.tsx.html\n[warn] coverage/screens/ForgotPasswordScreen.tsx.html\n[warn] coverage/screens/index.html\n[warn] coverage/screens/LocationSettingsScreen.tsx.html\n[warn] coverage/screens/NotificationsScreen.tsx.html\n[warn] coverage/screens/OnboardingScreen.tsx.html\n[warn] coverage/screens/PersonProfileScreen.tsx.html\n[warn] coverage/screens/ProfileScreen.tsx.html\n[warn] coverage/screens/ResetPasswordScreen.tsx.html\n[warn] coverage/screens/ReviewDetailScreen.backup.tsx.html\n[warn] coverage/screens/ReviewDetailScreen.tsx.html\n[warn] coverage/screens/SearchScreen.tsx.html\n[warn] coverage/screens/SignInScreen.tsx.html\n[warn] coverage/screens/SignUpScreen.tsx.html\n[warn] coverage/services/adMobService.ts.html\n[warn] coverage/services/appStateManager.ts.html\n[warn] coverage/services/audioAnalysisService.ts.html\n[warn] coverage/services/audioModeService.ts.html\n[warn] coverage/services/auth.ts.html\n[warn] coverage/services/biometricService.ts.html\n[warn] coverage/services/cacheService.ts.html\n[warn] coverage/services/chat.ts.html\n[warn] coverage/services/collegeService.ts.html\n[warn] coverage/services/consolidatedRealtimeService.ts.html\n[warn] coverage/services/errorReporting.ts.html\n[warn] coverage/services/gdprConsentService.ts.html\n[warn] coverage/services/imageCompressionService.ts.html\n[warn] coverage/services/index.html\n[warn] coverage/services/initializationService.ts.html\n[warn] coverage/services/locationService.ts.html\n[warn] coverage/services/mediaProcessingService.ts.html\n[warn] coverage/services/memoryManager.ts.html\n[warn] coverage/services/messageEditService.ts.html\n[warn] coverage/services/messageForwardService.ts.html\n[warn] coverage/services/messagePaginationService.ts.html\n[warn] coverage/services/messageStatusService.ts.html\n[warn] coverage/services/messageVirtualizer.ts.html\n[warn] coverage/services/moderation.ts.html\n[warn] coverage/services/notificationHelpers.ts.html\n[warn] coverage/services/notificationService.ts.html\n[warn] coverage/services/performanceMonitoring.ts.html\n[warn] coverage/services/permissionValidationService.ts.html\n[warn] coverage/services/productionMonitoring.ts.html\n[warn] coverage/services/realtimeChat.ts.html\n[warn] coverage/services/realtimeSubscriptionManager.ts.html\n[warn] coverage/services/reports.ts.html\n[warn] coverage/services/reviews.ts.html\n[warn] coverage/services/search.ts.html\n[warn] coverage/services/shareService.ts.html\n[warn] coverage/services/socialSharingService.ts.html\n[warn] coverage/services/storage.ts.html\n[warn] coverage/services/storageService.ts.html\n[warn] coverage/services/subscriptionService.ts.html\n[warn] coverage/services/supabase.ts.html\n[warn] coverage/services/users.ts.html\n[warn] coverage/services/usersService.ts.html\n[warn] coverage/services/utils/FileCompressor.ts.html\n[warn] coverage/services/utils/FileDownloader.ts.html\n[warn] coverage/services/utils/FilePreviewer.ts.html\n[warn] coverage/services/utils/FilePreviewGenerator.ts.html\n[warn] coverage/services/utils/FileUploader.ts.html\n[warn] coverage/services/utils/FileValidator.ts.html\n[warn] coverage/services/utils/ImageProcessor.ts.html\n[warn] coverage/services/utils/index.html\n[warn] coverage/services/utils/PathSanitizer.ts.html\n[warn] coverage/services/videoThumbnailService.ts.html\n[warn] coverage/services/websocketService.ts.html\n[warn] coverage/sorter.js\n[warn] coverage/state/audioPlayerStore.ts.html\n[warn] coverage/state/authStore.ts.html\n[warn] coverage/state/chatRoomsStore.ts.html\n[warn] coverage/state/chatStore.ts.html\n[warn] coverage/state/commentsStore.ts.html\n[warn] coverage/state/index.html\n[warn] coverage/state/messagesStore.ts.html\n[warn] coverage/state/notificationStore.ts.html\n[warn] coverage/state/reviewsStore.ts.html\n[warn] coverage/state/safetyStore.ts.html\n[warn] coverage/state/subscriptionStore.ts.html\n[warn] coverage/state/themeStore.ts.html\n[warn] coverage/types/ai.ts.html\n[warn] coverage/types/database.types.ts.html\n[warn] coverage/types/error.ts.html\n[warn] coverage/types/index.html\n[warn] coverage/types/index.ts.html\n[warn] coverage/types/storage.ts.html\n[warn] coverage/utils/adMobTestingUtils.ts.html\n[warn] coverage/utils/analytics.ts.html\n[warn] coverage/utils/audioUtils.ts.html\n[warn] coverage/utils/authUtils.ts.html\n[warn] coverage/utils/batchingUtils.ts.html\n[warn] coverage/utils/buildEnvironment.ts.html\n[warn] coverage/utils/chatroomScrollTest.ts.html\n[warn] coverage/utils/chatroomTest.ts.html\n[warn] coverage/utils/chatUtils.ts.html\n[warn] coverage/utils/cn.ts.html\n[warn] coverage/utils/compatibilityUtils.ts.html\n[warn] coverage/utils/dateUtils.ts.html\n[warn] coverage/utils/debugUtils.ts.html\n[warn] coverage/utils/e2eTestRunner.ts.html\n[warn] coverage/utils/environmentValidation.ts.html\n[warn] coverage/utils/errorHandling.ts.html\n[warn] coverage/utils/fieldMapping.ts.html\n[warn] coverage/utils/hermesCompatibility.ts.html\n[warn] coverage/utils/imagePickerWorkaround.ts.html\n[warn] coverage/utils/index.html\n[warn] coverage/utils/inputValidation.ts.html\n[warn] coverage/utils/location.ts.html\n[warn] coverage/utils/mediaErrorHandling.ts.html\n[warn] coverage/utils/mediaUtils.ts.html\n[warn] coverage/utils/messageDeduplication.ts.html\n[warn] coverage/utils/messageUtils.ts.html\n[warn] coverage/utils/mmkvStorage.ts.html\n[warn] coverage/utils/monetizationIntegrationTest.ts.html\n[warn] coverage/utils/networkUtils.ts.html\n[warn] coverage/utils/performance.ts.html\n[warn] coverage/utils/performanceUtils.ts.html\n[warn] coverage/utils/platform.ts.html\n[warn] coverage/utils/propertyGuards.ts.html\n[warn] coverage/utils/realtimeUtils.ts.html\n[warn] coverage/utils/reliableNetworkCheck.ts.html\n[warn] coverage/utils/responsive.ts.html\n[warn] coverage/utils/responsiveStyles.ts.html\n[warn] coverage/utils/retryLogic.ts.html\n[warn] coverage/utils/scrollUtils.ts.html\n[warn] coverage/utils/storageDebug.ts.html\n[warn] coverage/utils/subscriptionUtils.ts.html\n[warn] coverage/utils/supabaseAuthTests.ts.html\n[warn] coverage/utils/supabaseTestSuite.ts.html\n[warn] coverage/utils/uiValidation.ts.html\n[warn] coverage/utils/uploadTest.ts.html\n[warn] coverage/utils/videoUtils.ts.html\n[warn] Code style issues found in 546 files. Run Prettier with --write to fix.\n"
    },
    {
      "test": "ChatRoom screen exists",
      "file": "src/screens/ChatRoom.tsx"
    },
    {
      "test": "Media service exists",
      "file": "src/services/mediaService.ts"
    },
    {
      "test": "Media utilities exist",
      "file": "src/utils/media.ts"
    },
    {
      "test": "Media service methods",
      "file": "src/services/mediaService.ts",
      "error": "ENOENT: no such file or directory, open 'src/services/mediaService.ts'"
    },
    {
      "test": "SettingsScreen exists",
      "file": "src/screens/SettingsScreen.tsx"
    },
    {
      "test": "User service exists",
      "file": "src/services/userService.ts"
    },
    {
      "test": "Notification utilities exist",
      "file": "src/utils/notifications.ts"
    },
    {
      "test": "SubscriptionsScreen exists",
      "file": "src/screens/SubscriptionsScreen.tsx"
    },
    {
      "test": "RevenueCat service exists",
      "file": "src/services/revenuecat.ts"
    },
    {
      "test": "BannerAd component exists",
      "file": "src/components/ads/BannerAd.tsx"
    },
    {
      "test": "HomeScreen exists",
      "file": "src/screens/HomeScreen.tsx"
    },
    {
      "test": "ChatRoom exists",
      "file": "src/screens/ChatRoom.tsx"
    },
    {
      "test": "SettingsScreen exists",
      "file": "src/screens/SettingsScreen.tsx"
    },
    {
      "test": "SubscriptionsScreen exists",
      "file": "src/screens/SubscriptionsScreen.tsx"
    },
    {
      "test": "FeaturedScreen exists",
      "file": "src/screens/FeaturedScreen.tsx"
    },
    {
      "test": "ExploreScreen exists",
      "file": "src/screens/ExploreScreen.tsx"
    },
    {
      "test": "Chat API exists",
      "file": "src/api/chat.ts"
    },
    {
      "test": "User API exists",
      "file": "src/api/user.ts"
    },
    {
      "test": "userStore exists",
      "file": "src/state/userStore.ts"
    },
    {
      "test": "Offline service exists",
      "file": "src/services/offlineService.ts"
    },
    {
      "test": "Run Jest tests",
      "command": "npm test -- --passWithNoTests",
      "error": "Command failed: npm test -- --passWithNoTests\nwatchman warning:  Recrawled this watch 7 times, most recently because:\nMustScanSubDirs UserDroppedTo resolve, please review the information on\nhttps://facebook.github.io/watchman/docs/troubleshooting.html#recrawl\nTo clear this warning, run:\n`watchman watch-del '/Users/iamabillionaire/Downloads/loccc' ; watchman watch-project '/Users/iamabillionaire/Downloads/loccc'`\n\nPASS src/i18n/i18n.test.ts\nFAIL src/tests/chatrooms.test.tsx\n  ● Test suite failed to run\n\n    Supabase configuration invalid: EXPO_PUBLIC_SUPABASE_URL is missing, EXPO_PUBLIC_SUPABASE_ANON_KEY is missing\n\n      209 | if (!initialValidation.isValid) {\n      210 |   const errorMessage = `Supabase configuration invalid: ${initialValidation.errors.join(\", \")}`;\n    > 211 |   throw new Error(errorMessage);\n          |         ^\n      212 | }\n      213 |\n      214 | // Production configuration based on environment\n\n      at Object.<anonymous> (src/config/supabase.ts:211:9)\n      at Object.require (src/services/consolidatedRealtimeService.ts:7:1)\n      at Object.require (src/state/chatStore.ts:17:1)\n      at Object.require (src/screens/ChatroomsScreen.tsx:6:1)\n      at Object.require (src/tests/chatrooms.test.tsx:4:1)\n\nFAIL src/tests/search.test.ts\n  ● Test suite failed to run\n\n    Supabase configuration invalid: EXPO_PUBLIC_SUPABASE_URL is missing, EXPO_PUBLIC_SUPABASE_ANON_KEY is missing\n\n      209 | if (!initialValidation.isValid) {\n      210 |   const errorMessage = `Supabase configuration invalid: ${initialValidation.errors.join(\", \")}`;\n    > 211 |   throw new Error(errorMessage);\n          |         ^\n      212 | }\n      213 |\n      214 | // Production configuration based on environment\n\n      at Object.<anonymous> (src/config/supabase.ts:211:9)\n      at Object.require (src/services/search.ts:1:1)\n      at Object.require (src/tests/search.test.ts:8:1)\n\nFAIL src/services/__tests__/websocketService.test.ts (35.491 s)\n  ● Console\n\n    console.log\n      [WebSocket] Initializing Supabase Realtime listeners v2.57.4\n\n      at SupabaseRealtimeService.log [as initializeSupabaseListeners] (src/services/websocketService.ts:77:13)\n\n    console.log\n      🧹 Disconnecting from Supabase Realtime...\n\n      at SupabaseRealtimeService.log (src/services/websocketService.ts:147:13)\n\n    console.log\n      ✅ Disconnected from Supabase Realtime\n\n      at SupabaseRealtimeService.log (src/services/websocketService.ts:218:13)\n\n    console.log\n      🧹 Disconnecting from Supabase Realtime...\n\n      at SupabaseRealtimeService.log (src/services/websocketService.ts:147:13)\n\n    console.log\n      ✅ Disconnected from Supabase Realtime\n\n      at SupabaseRealtimeService.log (src/services/websocketService.ts:218:13)\n\n    console.log\n      🧹 Disconnecting from Supabase Realtime...\n\n      at SupabaseRealtimeService.log (src/services/websocketService.ts:147:13)\n\n    console.log\n      ✅ Disconnected from Supabase Realtime\n\n      at SupabaseRealtimeService.log (src/services/websocketService.ts:218:13)\n\n    console.log\n      🔌 Connecting to Supabase Realtime v2.57.4... { userId: 'test-user-id', userName: 'Test User' }\n\n      at SupabaseRealtimeService.log (src/services/websocketService.ts:105:13)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Object.connect (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:85:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Object.connect (src/services/__tests__/websocketService.test.ts:85:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508062428,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 0\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.log\n      🔄 Attempting reconnection (1/5) in 1401ms...\n\n      at SupabaseRealtimeService.log [as attemptReconnection] (src/services/websocketService.ts:819:13)\n          at Generator.throw (<anonymous>)\n\n    console.log\n      🧹 Disconnecting from Supabase Realtime...\n\n      at SupabaseRealtimeService.log (src/services/websocketService.ts:147:13)\n\n    console.log\n      ✅ Disconnected from Supabase Realtime\n\n      at SupabaseRealtimeService.log (src/services/websocketService.ts:218:13)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Object.connect (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:94:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Object.connect (src/services/__tests__/websocketService.test.ts:94:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508065434,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 0\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Object.connect (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:97:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Object.connect (src/services/__tests__/websocketService.test.ts:97:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Object.connect (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:105:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Object.connect (src/services/__tests__/websocketService.test.ts:105:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508068438,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 0\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Timeout.connect (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:838:22)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Timeout.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at listOnTimeout (node:internal/timers:608:17)\n          at processTimers (node:internal/timers:543:7)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Timeout.connect (src/services/websocketService.ts:838:22)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Timeout.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508070435,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 1\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Object.connect (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:115:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusHook (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:281:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:246:5)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Object.connect (src/services/__tests__/websocketService.test.ts:115:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508073166,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 0\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508073439,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 1\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.error\n      ❌ Failed to setup room channels: TypeError: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.channel (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:535:39)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as joinRoom] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:224:17)\n          at Object.joinRoom (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:123:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      654 |       console.log(\"✅ Room channels setup completed\");\n      655 |     } catch (error: any) {\n    > 656 |       console.error(\"❌ Failed to setup room channels:\", error);\n          |               ^\n      657 |\n      658 |       // Cleanup on failure\n      659 |       if (this.presenceChannel) {\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:656:15)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as setupRoomChannels] (src/services/websocketService.ts:529:34)\n      at SupabaseRealtimeService.setupRoomChannels (src/services/websocketService.ts:240:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as joinRoom] (src/services/websocketService.ts:224:17)\n      at Object.joinRoom (src/services/__tests__/websocketService.test.ts:123:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.error\n      ❌ Failed to join room: Error: Room channels setup failed: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:677:13)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as joinRoom] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:224:17)\n          at Object.joinRoom (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:123:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      254 |       console.log(\"✅ Successfully joined room:\", chatRoomId);\n      255 |     } catch (error: any) {\n    > 256 |       console.error(\"❌ Failed to join room:\", error);\n          |               ^\n      257 |       this.callbacks.onError(`Failed to join room: ${error.message}`);\n      258 |     }\n      259 |   }\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:256:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Object.connect (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:115:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusHook (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:281:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:246:5)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Object.connect (src/services/__tests__/websocketService.test.ts:115:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508076448,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 0\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.error\n      ❌ Failed to setup room channels: TypeError: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.channel (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:535:39)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as joinRoom] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:224:17)\n          at Object.joinRoom (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:130:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      654 |       console.log(\"✅ Room channels setup completed\");\n      655 |     } catch (error: any) {\n    > 656 |       console.error(\"❌ Failed to setup room channels:\", error);\n          |               ^\n      657 |\n      658 |       // Cleanup on failure\n      659 |       if (this.presenceChannel) {\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:656:15)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as setupRoomChannels] (src/services/websocketService.ts:529:34)\n      at SupabaseRealtimeService.setupRoomChannels (src/services/websocketService.ts:240:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as joinRoom] (src/services/websocketService.ts:224:17)\n      at Object.joinRoom (src/services/__tests__/websocketService.test.ts:130:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.error\n      ❌ Failed to join room: Error: Room channels setup failed: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:677:13)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as joinRoom] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:224:17)\n          at Object.joinRoom (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:130:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      254 |       console.log(\"✅ Successfully joined room:\", chatRoomId);\n      255 |     } catch (error: any) {\n    > 256 |       console.error(\"❌ Failed to join room:\", error);\n          |               ^\n      257 |       this.callbacks.onError(`Failed to join room: ${error.message}`);\n      258 |     }\n      259 |   }\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:256:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Object.connect (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:115:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusHook (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:281:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:246:5)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Object.connect (src/services/__tests__/websocketService.test.ts:115:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508079455,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 0\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.error\n      ❌ Failed to setup room channels: TypeError: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.channel (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:535:39)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as joinRoom] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:224:17)\n          at Object.joinRoom (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:137:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      654 |       console.log(\"✅ Room channels setup completed\");\n      655 |     } catch (error: any) {\n    > 656 |       console.error(\"❌ Failed to setup room channels:\", error);\n          |               ^\n      657 |\n      658 |       // Cleanup on failure\n      659 |       if (this.presenceChannel) {\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:656:15)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as setupRoomChannels] (src/services/websocketService.ts:529:34)\n      at SupabaseRealtimeService.setupRoomChannels (src/services/websocketService.ts:240:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as joinRoom] (src/services/websocketService.ts:224:17)\n      at Object.joinRoom (src/services/__tests__/websocketService.test.ts:137:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.error\n      ❌ Failed to join room: Error: Room channels setup failed: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:677:13)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as joinRoom] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:224:17)\n          at Object.joinRoom (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:137:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      254 |       console.log(\"✅ Successfully joined room:\", chatRoomId);\n      255 |     } catch (error: any) {\n    > 256 |       console.error(\"❌ Failed to join room:\", error);\n          |               ^\n      257 |       this.callbacks.onError(`Failed to join room: ${error.message}`);\n      258 |     }\n      259 |   }\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:256:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.error\n      ❌ Failed to setup room channels: TypeError: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.channel (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:535:39)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      654 |       console.log(\"✅ Room channels setup completed\");\n      655 |     } catch (error: any) {\n    > 656 |       console.error(\"❌ Failed to setup room channels:\", error);\n          |               ^\n      657 |\n      658 |       // Cleanup on failure\n      659 |       if (this.presenceChannel) {\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:656:15)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as setupRoomChannels] (src/services/websocketService.ts:529:34)\n      at SupabaseRealtimeService.setupRoomChannels (src/services/websocketService.ts:240:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to join room: Error: Room channels setup failed: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:677:13)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      254 |       console.log(\"✅ Successfully joined room:\", chatRoomId);\n      255 |     } catch (error: any) {\n    > 256 |       console.error(\"❌ Failed to join room:\", error);\n          |               ^\n      257 |       this.callbacks.onError(`Failed to join room: ${error.message}`);\n      258 |     }\n      259 |   }\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:256:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Object.connect (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:148:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusHook (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:281:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:246:5)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Object.connect (src/services/__tests__/websocketService.test.ts:148:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508082462,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 0\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.error\n      ❌ Failed to setup room channels: TypeError: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.channel (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:535:39)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as joinRoom] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:224:17)\n          at Object.joinRoom (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:149:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      654 |       console.log(\"✅ Room channels setup completed\");\n      655 |     } catch (error: any) {\n    > 656 |       console.error(\"❌ Failed to setup room channels:\", error);\n          |               ^\n      657 |\n      658 |       // Cleanup on failure\n      659 |       if (this.presenceChannel) {\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:656:15)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as setupRoomChannels] (src/services/websocketService.ts:529:34)\n      at SupabaseRealtimeService.setupRoomChannels (src/services/websocketService.ts:240:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as joinRoom] (src/services/websocketService.ts:224:17)\n      at Object.joinRoom (src/services/__tests__/websocketService.test.ts:149:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to join room: Error: Room channels setup failed: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:677:13)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as joinRoom] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:224:17)\n          at Object.joinRoom (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:149:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      254 |       console.log(\"✅ Successfully joined room:\", chatRoomId);\n      255 |     } catch (error: any) {\n    > 256 |       console.error(\"❌ Failed to join room:\", error);\n          |               ^\n      257 |       this.callbacks.onError(`Failed to join room: ${error.message}`);\n      258 |     }\n      259 |   }\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:256:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.error\n      ❌ Failed to send message: TypeError: _supabase.default.from is not a function\n          at SupabaseRealtimeService.from (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:325:10)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as sendChatMessage] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:295:24)\n          at Object.sendChatMessage (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:166:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      358 |       console.log(\"✅ Message sent successfully\");\n      359 |     } catch (error: any) {\n    > 360 |       console.error(\"❌ Failed to send message:\", error);\n          |               ^\n      361 |\n      362 |       // Update optimistic message with error status\n      363 |       const failedMessage: ChatMessage = {\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:360:15)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as sendChatMessage] (src/services/websocketService.ts:295:24)\n      at Object.sendChatMessage (src/services/__tests__/websocketService.test.ts:166:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Object.connect (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:148:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusHook (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:281:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:246:5)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Object.connect (src/services/__tests__/websocketService.test.ts:148:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508085466,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 0\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.error\n      ❌ Failed to setup room channels: TypeError: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.channel (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:535:39)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as joinRoom] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:224:17)\n          at Object.joinRoom (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:149:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      654 |       console.log(\"✅ Room channels setup completed\");\n      655 |     } catch (error: any) {\n    > 656 |       console.error(\"❌ Failed to setup room channels:\", error);\n          |               ^\n      657 |\n      658 |       // Cleanup on failure\n      659 |       if (this.presenceChannel) {\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:656:15)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as setupRoomChannels] (src/services/websocketService.ts:529:34)\n      at SupabaseRealtimeService.setupRoomChannels (src/services/websocketService.ts:240:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as joinRoom] (src/services/websocketService.ts:224:17)\n      at Object.joinRoom (src/services/__tests__/websocketService.test.ts:149:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to join room: Error: Room channels setup failed: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:677:13)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as joinRoom] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:224:17)\n          at Object.joinRoom (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:149:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      254 |       console.log(\"✅ Successfully joined room:\", chatRoomId);\n      255 |     } catch (error: any) {\n    > 256 |       console.error(\"❌ Failed to join room:\", error);\n          |               ^\n      257 |       this.callbacks.onError(`Failed to join room: ${error.message}`);\n      258 |     }\n      259 |   }\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:256:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Object.connect (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:197:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Object.connect (src/services/__tests__/websocketService.test.ts:197:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508088472,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 0\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Object.connect (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:226:47)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Object.connect (src/services/__tests__/websocketService.test.ts:226:47)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508091479,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 0\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.error\n      ❌ Failed to setup room channels: TypeError: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.channel (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:535:39)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as joinRoom] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:224:17)\n          at Object.joinRoom (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:231:44)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      654 |       console.log(\"✅ Room channels setup completed\");\n      655 |     } catch (error: any) {\n    > 656 |       console.error(\"❌ Failed to setup room channels:\", error);\n          |               ^\n      657 |\n      658 |       // Cleanup on failure\n      659 |       if (this.presenceChannel) {\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:656:15)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as setupRoomChannels] (src/services/websocketService.ts:529:34)\n      at SupabaseRealtimeService.setupRoomChannels (src/services/websocketService.ts:240:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as joinRoom] (src/services/websocketService.ts:224:17)\n      at Object.joinRoom (src/services/__tests__/websocketService.test.ts:231:44)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to join room: Error: Room channels setup failed: _supabase.default.channel is not a function\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:677:13)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as setupRoomChannels] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:529:34)\n          at SupabaseRealtimeService.setupRoomChannels (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:240:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as joinRoom] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:224:17)\n          at Object.joinRoom (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:231:44)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      254 |       console.log(\"✅ Successfully joined room:\", chatRoomId);\n      255 |     } catch (error: any) {\n    > 256 |       console.error(\"❌ Failed to join room:\", error);\n          |               ^\n      257 |       this.callbacks.onError(`Failed to join room: ${error.message}`);\n      258 |     }\n      259 |   }\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:256:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      Authentication check failed (attempt 1/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as ensureAuthenticated] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:924:36)\n          at SupabaseRealtimeService.ensureAuthenticated (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:121:18)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at SupabaseRealtimeService.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at SupabaseRealtimeService.apply [as connect] (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:99:16)\n          at Object.connect (/Users/iamabillionaire/Downloads/loccc/src/services/__tests__/websocketService.test.ts:261:30)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n          at /Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n          at new Promise (<anonymous>)\n          at Object.<anonymous> (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n          at Promise.then.completed (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n          at runTestInternal (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/iamabillionaire/Downloads/loccc/node_modules/jest-runner/build/testWorker.js:106:12)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as ensureAuthenticated] (src/services/websocketService.ts:924:36)\n      at SupabaseRealtimeService.ensureAuthenticated (src/services/websocketService.ts:121:18)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at SupabaseRealtimeService.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n      at SupabaseRealtimeService.apply [as connect] (src/services/websocketService.ts:99:16)\n      at Object.connect (src/services/__tests__/websocketService.test.ts:261:30)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7\n      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)\n\n    console.warn\n      Authentication check failed (attempt 2/3): TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn (src/services/websocketService.ts:958:17)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n    console.error\n      ❌ Failed to connect to Supabase Realtime: TypeError: Cannot read properties of undefined (reading 'getUser')\n          at SupabaseRealtimeService.getUser (/Users/iamabillionaire/Downloads/loccc/src/services/websocketService.ts:933:33)\n          at Generator.next (<anonymous>)\n          at asyncGeneratorStep (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n          at _next (/Users/iamabillionaire/Downloads/loccc/node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n      132 |       console.log(\"✅ Successfully connected to Supabase Realtime\");\n      133 |     } catch (error: any) {\n    > 134 |       console.error(\"❌ Failed to connect to Supabase Realtime:\", error);\n          |               ^\n      135 |       this.trackConnectionError(error.message || \"Failed to connect to realtime\");\n      136 |       this.updateConnectionStatus(\"error\", error.message || \"Failed to connect to realtime\");\n      137 |\n\n      at SupabaseRealtimeService.error (src/services/websocketService.ts:134:15)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n    console.warn\n      [WebSocket] Error tracked: {\n        timestamp: 1758508094487,\n        error: \"Cannot read properties of undefined (reading 'getUser')\",\n        attempts: 0\n      }\n\n      40 |     return;\n      41 |   }\n    > 42 |   return originalWarn.call(console, msg, ...args);\n         |                           ^\n      43 | };\n      44 |\n\n      at console.apply [as warn] (jest.setup.js:42:27)\n      at SupabaseRealtimeService.warn [as trackConnectionError] (src/services/websocketService.ts:1074:13)\n      at SupabaseRealtimeService.trackConnectionError (src/services/websocketService.ts:135:12)\n          at Generator.throw (<anonymous>)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _throw (node_modules/@babel/runtime/helpers/asyncToGenerator.js:20:9)\n\n  ● SupabaseRealtimeService - Expo SDK 54 Compatibility › Connection Management › should prevent duplicate connections\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n      88 |     });\n      89 |\n    > 90 |     it(\"should prevent duplicate connections\", async () => {\n         |     ^\n      91 |       const spy = jest.spyOn(console, \"log\").mockImplementation();\n      92 |\n      93 |       // First connection\n\n      at it (src/services/__tests__/websocketService.test.ts:90:5)\n      at describe (src/services/__tests__/websocketService.test.ts:83:3)\n      at Object.describe (src/services/__tests__/websocketService.test.ts:47:1)\n\n  ● SupabaseRealtimeService - Expo SDK 54 Compatibility › Room Management › should join room successfully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"test-user-id\", \"Test User\", \"test-room-id\"\n\n    Number of calls: 0\n\n      124 |\n      125 |       // Should call user join callback\n    > 126 |       expect(mockCallbacks.onUserJoin).toHaveBeenCalledWith(\"test-user-id\", \"Test User\", \"test-room-id\");\n          |                                        ^\n      127 |     });\n      128 |\n      129 |     it(\"should leave room successfully\", async () => {\n\n      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:126:40)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\n  ● SupabaseRealtimeService - Expo SDK 54 Compatibility › Room Management › should handle room switching\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"test-user-id\", \"Test User\", \"room-2\"\n\n    Number of calls: 0\n\n      140 |       // Should have left the first room\n      141 |       expect(mockCallbacks.onUserLeave).toHaveBeenCalledWith(\"test-user-id\", \"room-1\");\n    > 142 |       expect(mockCallbacks.onUserJoin).toHaveBeenCalledWith(\"test-user-id\", \"Test User\", \"room-2\");\n          |                                        ^\n      143 |     });\n      144 |   });\n      145 |\n\n      at Object.toHaveBeenCalledWith (src/services/__tests__/websocketService.test.ts:142:40)\n      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)\n      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nTest Suites: 3 failed, 1 passed, 4 total\nTests:       3 failed, 19 passed, 22 total\nSnapshots:   0 total\nTime:        38.657 s\nRan all test suites.\n"
    },
    {
      "test": "Export for all platforms",
      "command": "npx expo export --platform all --output-dir ./dist-test",
      "error": "Command failed: npx expo export --platform all --output-dir ./dist-test\n[Metro] Failed to resolve module react-native/Libraries/Utilities/codegenNativeComponent: Importing native-only module \"react-native/Libraries/Utilities/codegenNativeComponent\" on web from: node_modules/react-native-google-mobile-ads/lib/module/specs/components/GoogleMobileAdsBannerViewNativeComponent.js\n[Metro] Failed to resolve module react-native/Libraries/Utilities/codegenNativeComponent: Importing native-only module \"react-native/Libraries/Utilities/codegenNativeComponent\" on web from: node_modules/react-native-google-mobile-ads/lib/module/specs/components/GoogleMobileAdsMediaViewNativeComponent.js\n[Metro] Failed to resolve module react-native/Libraries/Utilities/codegenNativeComponent: Importing native-only module \"react-native/Libraries/Utilities/codegenNativeComponent\" on web from: node_modules/react-native-google-mobile-ads/lib/module/specs/components/GoogleMobileAdsNativeViewNativeComponent.js\nError: Importing native-only module \"react-native/Libraries/Utilities/codegenNativeComponent\" on web from: node_modules/react-native-google-mobile-ads/lib/module/specs/components/GoogleMobileAdsBannerViewNativeComponent.js\n\nImport stack:\n\n node_modules/react-native-google-mobile-ads/lib/module/specs/components/GoogleMobileAdsBannerViewNativeComponent.js\n | import \"react-native/Libraries/Utilities/codegenNativeComponent\"\n           ^ Importing react-native internals is not supported on web.\n\n node_modules/react-native-google-mobile-ads/lib/module/ads/BannerAd.js\n | import \"../specs/components/GoogleMobileAdsBannerViewNativeComponent\"\n\n node_modules/react-native-google-mobile-ads/lib/module/index.js\n | import \"./ads/BannerAd\"\n\n src/services/adMobService.ts\n | import \"react-native-google-mobile-ads\"\n\n App.tsx\n | import \"./src/services/adMobService\"\n\n index.ts\n | import \"./App\"\n\n \n | import \"./index.ts\"\n\n"
    }
  ],
  "warnings": [
    {
      "test": "WebSocket service methods",
      "file": "src/services/websocketService.ts",
      "missing": "sendMessage"
    },
    {
      "test": "WebSocket service methods",
      "file": "src/services/websocketService.ts",
      "missing": "subscribeToChannel"
    },
    {
      "test": "Search service methods",
      "file": "src/services/search.ts",
      "missing": "searchUsers"
    },
    {
      "test": "Search service methods",
      "file": "src/services/search.ts",
      "missing": "searchChatrooms"
    }
  ],
  "timestamp": "2025-09-22T02:27:11.671Z"
}
